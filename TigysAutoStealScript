local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local PathfindingService = game:GetService("PathfindingService")
local LocalPlayer = Players.LocalPlayer
local BasePos
local AutoStealOn = false

local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "AutoStealGui"
ScreenGui.ResetOnSpawn = false
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 200, 0, 90)
Frame.Position = UDim2.new(0.05, 0, 0.2, 0)
Frame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = Frame

local UIStroke = Instance.new("UIStroke")
UIStroke.Color = Color3.fromRGB(0, 170, 255)
UIStroke.Thickness = 2
UIStroke.Parent = Frame

-- ðŸ”¹ Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -20, 0, 25)
Title.Position = UDim2.new(0, 10, 0, 5)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextScaled = true
Title.Font = Enum.Font.GothamBold
Title.Text = "Tigy's Auto Steal"
Title.Parent = Frame

-- ðŸ”¹ Auto Steal Button
local AutoStealBtn = Instance.new("TextButton")
AutoStealBtn.Size = UDim2.new(1, -20, 0, 35)
AutoStealBtn.Position = UDim2.new(0, 10, 0, 40)
AutoStealBtn.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
AutoStealBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoStealBtn.TextScaled = true
AutoStealBtn.Font = Enum.Font.GothamBold
AutoStealBtn.Text = "Auto Steal: Off"
AutoStealBtn.Parent = Frame

local BtnCorner = Instance.new("UICorner")
BtnCorner.CornerRadius = UDim.new(0, 10)
BtnCorner.Parent = AutoStealBtn

AutoStealBtn.MouseButton1Click:Connect(function()
    AutoStealOn = not AutoStealOn
    AutoStealBtn.Text = "Auto Steal: " .. (AutoStealOn and "On" or "Off")
    AutoStealBtn.BackgroundColor3 = AutoStealOn and Color3.fromRGB(0, 170, 0) or Color3.fromRGB(50, 50, 50)
end)

-- ðŸ”¹ Your original logic stays below
local function GetCharacter()
    local Char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local HRP = Char:WaitForChild("HumanoidRootPart")
    return Char, HRP
end

local function FindSafePosition(FromPos, ToPos)
    local RayParams = RaycastParams.new()
    RayParams.FilterDescendantsInstances = {Players.LocalPlayer.Character}
    RayParams.FilterType = Enum.RaycastFilterType.Blacklist
    local HorizontalDir = Vector3.new(ToPos.X - FromPos.X, 0, ToPos.Z - FromPos.Z)
    local Ray = workspace:Raycast(FromPos, HorizontalDir, RayParams)
    if Ray then
        local SafeDist = math.max(1, Ray.Distance - 2)
        return Vector3.new(
            FromPos.X + HorizontalDir.Unit.X * SafeDist,
            ToPos.Y,
            FromPos.Z + HorizontalDir.Unit.Z * SafeDist
        )
    else
        return ToPos
    end
end

local function TeleportMethod(TargetPos)
    local Char, HRP = GetCharacter()
    TargetPos = Vector3.new(TargetPos.X, TargetPos.Y + 8, TargetPos.Z)
    local BV = Instance.new("BodyVelocity")
    BV.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
    BV.Velocity = (TargetPos - HRP.Position).Unit * 100
    BV.P = 2000
    BV.Name = "FlightPower"
    BV.Parent = HRP
    repeat RunService.Heartbeat:Wait() until (HRP.Position - TargetPos).Magnitude < 4
    if BV then BV:Destroy() end
end

task.spawn(function()
    local Char, HRP = GetCharacter()
    repeat RunService.Heartbeat:Wait() until HRP.Parent and HRP.Position.Magnitude > 0
    task.wait(0.5)
    local Forward = HRP.CFrame.LookVector * 10
    HRP.CFrame = HRP.CFrame + Forward
    BasePos = HRP.Position
end)

local function SetupPrompt(Prompt)
    if Prompt.ActionText == "Steal" then
        Prompt.Triggered:Connect(function(Plr)
            if AutoStealOn and Plr == LocalPlayer and BasePos then
                local Char, HRP = GetCharacter()
                local Path = PathfindingService:CreatePath({
                    AgentRadius = 2,
                    AgentHeight = 5,
                    AgentCanJump = true,
                    AgentJumpHeight = 10,
                    AgentMaxSlope = 45,
                })
                Path:ComputeAsync(HRP.Position, BasePos)
                local Waypoints = Path:GetWaypoints()
                for _, Wp in ipairs(Waypoints) do
                    local SafePos = FindSafePosition(HRP.Position, Wp.Position)
                    TeleportMethod(SafePos)
                end
            end
        end)
    end
end

for _, Prompt in pairs(workspace:GetDescendants()) do
    if Prompt:IsA("ProximityPrompt") then
        SetupPrompt(Prompt)
    end
end

workspace.DescendantAdded:Connect(function(Desc)
    if Desc:IsA("ProximityPrompt") then
        SetupPrompt(Desc)
    end
end)

wait(3)

loadstring(game:HttpGet("https://raw.githubusercontent.com/tienkhanh1/spicy/main/Chilli.lua"))()
